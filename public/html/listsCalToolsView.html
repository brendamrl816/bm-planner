
<div ng-controller="calendarsCtrl">
 <h3>Calendars </h3>
    
    <div>
        
        <!--<div>-->
        <!--    <span>User Calendar</span>-->
        <!--    <button ng-style={'background-color':'black'} style="height:12.5px;width:10px; margin-right:5px"></button>-->
        <!--</div>-->
        <div ng-controller="calendarMenuCtrl" ng-repeat="calendar in theCalendars.calendars">
            <div>
                <span ng-hide="showCalendarMenu">{{calendar.name}}</span> 
                <button ng-click="ToggleshowCalendarMenu($event)" ng-hide="showCalendarMenu" ng-style={'background-color':calendar.color} style="height:12.5px;width:10px; font-size:30%; font-weight:bold">v</button>
                
                
                <div  ng-click="$event.stopPropagation()" style="margin-bottom:20px; width:60%" ng-show="showCalendarMenu">
                    <div style="margin:10px">
                        <br>
                        Edit name:<input type="text" size="10px" ng-model="nameToUpdate">
                        <br>
                        <br>
                        Edit color:
                        <button ng-style={'background-color':colorToUpdate} style="height:15px;width:10px; margin-right:5px"></button>
                        <colorpicker selected="colorToUpdate"></colorpicker>
                        <br>
                        <div ng-click="delete()">Delete Calendar</div>
                        
                        <div style="margin:8px">
                            <button ng-click="update(calendar.id, nameToUpdate, colorToUpdate, $index)">save changes</button>
                            <button ng-click="cancelUpdate()">cancel</button>
                        </div>
                        
                    </div>
                </div>
                <questionmodal question='verifyDeletion' ng-click="$event.stopPropagation()">
                    <div>All Events under this calendar will be deleted</div>
                    <div>Are you sure you want to delete this calendar?</div>
                    <div ng-click="yesDelete(calendar.id, $index)">YES</div> 
                    <div ng-click="noDelete()">NO</div>
                </questionmodal>
            </div>
            
            
        </div>
    </div>
    
    <br>
    <button ng-hide="addCalMenu" style="font-size:12px" ng-click="toggleAddCalendar($event)">add new calendar</button>
    <div style="width:60%" ng-click="$event.stopPropagation()" ng-show="addCalMenu">
       <form style="margin:10px">
            Name: <input style="margin-right:0px; height:18px; width:100px" type="text" ng-model="name">
            <br>
            Color: <button ng-style={'background-color':color} style="height:15px;width:10px; margin-right:5px"></button>
            <div>
                <colorpicker selected="color"></colorpicker>
            </div> 
            <br>
            <div style="margin:8px">
                <button ng-click="add()">add</button>
                <button ng-click="cancelAdd()">cancel</button>
            </div>
        </form> 
    </div>
    
   
</div>




<br>
    <h3>Lists and Tasks  </h3>

<div>
    
    <div ng-controller="listsCtrl">
        
        <div ng-controller="listMenuCtrl as menu" ng-repeat="list in lists">
            
            <div>
                <span ng-hide="menu.showMenu" ng-style="{'color':list.color, 'font-weight':'bold'}">{{list.name}}</span>
                <button ng-click="menu.toggleMenu($event)"  ng-hide="menu.showMenu" style="height:15px;width:10px; margin-right:5px"></button>
                <div style="width:60%" ng-click="$event.stopPropagation()" ng-show="menu.showMenu">
                    <div style="margin:10px">
                       Edit Name:
                        <input type="text" size="10" ng-model="menu.name">
                        <br>
                        Edit Color:
                        <button ng-style={'background-color':menu.color} style="height:15px;width:10px; margin-right:5px"></button>
                        <colorpicker selected="menu.color"></colorpicker>
                        <br>
                        <button ng-click="menu.delete_list($index)">delete list</button>
                        <br>
                        <button ng-click="menu.update($index)">save</button>
                        <button ng-click="menu.cancel()">cancel</button>
                        <br>
                    </div>
                </div>
                
                <div style="display:block" ng-controller="tasksCtrl">
                    
                    <div style="display:block; width:100%" ng-repeat="task in list.tasks">
                        
                            <div style="width:80%; float:left">
                                <input  type="checkbox" ng-checked="task.completed" ng-click="updateCompleted($parent.$index, $index, task)">
                                <span  ng-class="completedClass(task.completed)">{{task.name}}</span> 
                            </div>
                            
                            <div style="float:left" >
                                <button ng-click="delete_task($parent.$index, $index, task.id)">x</button>
                            </div>
                        
                    </div>
                    
                    <br>
                    <div>
                        <form ng-submit="add_tasks($parent.$index, taskName)">
                            <div style="display:inline-block">
                                <input  type="checkbox" ng-checked="completed" ng-click="toggleCompleted()">
                                <input ng-class="completedClass(completed)" type="text" size="10" ng-model="taskName">
                                <button ng-hide="hideAddButton" type="submit">add task</button>
                            </div>
                        </form>
                    </div>
                    
                </div>
                
            </div>
            <br>
        </div>
        
        
        <button ng-click="toggleAddList($event)" ng-hide="addListMenu">Add new List</button>
        <div style="width:60%" ng-show="addListMenu">
            <form ng-click="$event.stopPropagation()">
                List Name:
                <br/>
                <input type="text"  size="8" ng-model="listName" >
                <br/>
                List Color: <button ng-style={'background-color':color} style="height:15px;width:10px; margin-right:5px"></button>
                <div>
                <colorpicker selected="color"></colorpicker>
                </div>
                <button ng-click="add_list()">add</button>
                <button ng-click="cancelAdd()">cancel</button>
            </form>
        </div>
        
    </div>
    
    
    