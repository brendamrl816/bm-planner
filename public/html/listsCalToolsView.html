
<div ng-controller="calendarsCtrl as calie">
    
    <div class="headers" ng-style="{'color':style.theStyle.css.body_color}">Calendars</div>
    <div>
        <div ng-controller="calendarMenuCtrl as calmenu" ng-repeat="calendar in theCalendars.calendars">
            <div style="display:inline-block; margin:2px">
                <div style="float:left; margin-left:5px; position:relative" class="menuButtons" ng-click="calmenu.ToggleshowCalendarMenu()" ng-style="{'background-color':'rgb(' +calendar.color+ ')'}"><div style="position:absolute; top:25%; left:25%"><i class="fa fa-pencil fa-lg"></i></div></div>
                <span style="float:left; font-size:12px; margin-top:5px; margin-left:5px">{{calendar.name}}</span> 
                
                <menumodal question="calmenu.showCalendarMenu">
                    <form ng-style="style.menuModalStyle()" class="menuForm">
                        <div style="margin:10px">
                            <div ng-if="calendar.id != theCalendars.mainCalendar.id">
                                <span style="margin-right:5px" class="boldFont">Edit name:</span><input ng-style="style.modalbuttonStyle()" type="text" size="10px" ng-model="calmenu.nameToUpdate">
                            </div>
                            <div ng-if="calendar.id == theCalendars.mainCalendar.id" style="margin-left:40px; margin-bottom:10px" >
                                <div class="boldFont" style="font-size:16px">{{calendar.name}}</div>
                            </div>
                            <br>
                            <div style="margin-left:15px">
                                <span class="boldFont">Edit color:</span>
                                <button style="height:15px; cursor: context-menu; width:10px; margin-right:5px" ng-style="{'background-color':'rgb(' + calmenu.colorToUpdate + ')', 'margin-right':'5px'}"></button>
                                <colorpicker selected="calmenu.colorToUpdate"></colorpicker>
                            </div>
                            <br>
                            <button ng-if="calendar.id != theCalendars.mainCalendar.id" class="boldFont" ng-style="style.buttonStyle()" style="width:90%; cursor:hand; height:20px" ng-click="calmenu.delete()">
                                <div style="margin-left:15px">
                                    <i class="fa fa-trash fa-lg"></i>
                                    <span>Delete Calendar</span>
                                </div>
                            </button>
                            
                            <div style="margin-top:15px; width:100%">
                                <button ng-style="style.buttonStyle()" style="left:0; width:45%" ng-click="calmenu.update(calendar.id, calmenu.nameToUpdate, calmenu.colorToUpdate, $index)">save </button>
                                <button ng-style="style.buttonStyle()" style="left:50%; width:45%" ng-click="calmenu.cancelUpdate()">cancel</button>
                            </div>
                        </div>
                    </form>
                        
                </menumodal>
                
                <continuemodal question='calmenu.verifyDeletion' ng-click="$event.stopPropagation()">
                    <div ng-style="style.menuModalStyle()" class="questionModal">
                        <div style="margin-left:30px; margin-top:45px">
                            <div style="margin:10px">All Events under this calendar will be deleted</div>
                            <div style="margin:10px">Are you sure you want to delete this calendar?</div>
                            <div style="width:100%; margin:10px; display:inline-block">
                                <button style="font-size:12px; float:left; width:30%; margin-right:10%" ng-style="style.buttonStyle()" ng-click="calmenu.yesDelete(calendar.id, $index)"><span style="margin-left:10%">YES</span></button> 
                                <button style="font-size:12px; float:left; width:30%" ng-style="style.buttonStyle()" ng-click="calmenu.noDelete()"><span style="margin-left:10%">NO</span></button>
                            </div>
                        </div>
                       
                        
                    </div>
                        
                </continuemodal>
            </div>
        </div>
    </div>
    
    <br>
    
    <button style="font-size:12px" ng-style="style.buttonStyle()" ng-click="toggleAddCalendar()">add a calendar</button>
    <addtoolsmodal question="addCalMenu">
       <form ng-style="style.addModalStyle()" class="addForm">
            <div style="margin-left:25%; margin-top:8%">
               Calendar Name:
               <br>
               <input ng-style="style.modalbuttonStyle()" style="margin-right:0px; height:18px; width:150px" type="text" ng-model="calie.name">
                <br>
                <br>
                Color: <button style="height:15px; width:10px; cursor: context-menu; margin-right:5px" ng-style="{'background-color':'rgb(' +calie.color+ ')', 'margin-right':'5px'}"></button>
                <div>
                    <colorpicker selected="calie.color"></colorpicker>
                </div> 
                <br>
                <div style="margin:5%">
                    <button style="margin-right:10px" ng-style="style.buttonStyle()" ng-click="add()">add</button>
                    <button ng-style="style.buttonStyle()" ng-click="cancelAdd()">cancel</button>
                </div> 
            </div>
                
        </form> 
    </addtoolsmodal>
    
</div>


<br>
 

<div ng-controller="listsCtrl as todolist">
    <div class="headers" ng-style="{'color':style.theStyle.css.body_color}">Lists and Tasks</div> 
    <div>
        
        <div ng-controller="listMenuCtrl as listMenu" ng-repeat="list in lists">
            
            <div style="display:inline-block">
                <span ng-style="{'color':'rgb(' +list.color+ ')', 'float':'left', 'font-weight':'bold', 'margin-left':'5px'}">{{list.name}}</span>
                <div style="float:left; margin-left:5px; font-size:85%" class="menuButtons" ng-click="toggleMenu()"><i class="fa fa-pencil fa-lg"></i></div>
                <menumodal question="showMenu">
                    <form ng-style="style.menuModalStyle()" class="menuForm">
                        <div style="margin:10px">
                            <div>
                                <span class="boldFont">Edit name:</span><input ng-style="style.modalbuttonStyle()" type="text" size="10" ng-model="listMenu.name">
                            </div>
                            <br>
                            <span class="boldFont">Edit Color:</span>
                            <button style="height:15px; cursor: context-menu; width:10px; margin-right:5px" ng-style="{'background-color':'rgb(' +listMenu.color +')', 'margin-right':'5px'}"></button>
                            <div>
                                <colorpicker selected="listMenu.color"></colorpicker>
                            </div>
                            <br>
                            <button class="boldFont" ng-style="style.buttonStyle()" style="width:90%; height:20px" ng-click="delete_list($index)">
                                <div style="margin-left:15px">
                                    <i class="fa fa-trash fa-lg"></i>
                                    <span>Delete List</span>
                                </div>
                                    
                            </button>
                            <br>
                            <div style="margin-top:8px; widht:100%">
                               <button ng-style="style.buttonStyle()" style="left:0; width:45%" ng-click="update($index, listMenu.name, listMenu.color)">save</button>
                               <button ng-style="style.buttonStyle()" style="left:0; width:45%" ng-click="cancel()">cancel</button> 
                            </div>
                        </div>
                    </form>
                </menumodal>
            </div>
            
            <div style="display:block" ng-controller="tasksCtrl">
                
                <div ng-repeat="task in list.tasks">
                    <div style="position:relative; display:inline-block">
                        <div style="float:left; display:inline-block; font-size:90%">
                            <input  style="float:left" type="checkbox" ng-checked="task.completed" ng-click="updateCompleted($parent.$index, $index, task)">
                            <div style="float:left; width:150px; min-width:150px">
                                
                                <span  ng-class="completedClass(task.completed)">{{task.name}}</span> 
                            </div>
                        </div>
                        <div style="float:left; cursor:hand; font-size:80%">
                            <div style="position:absolute; top:5px; left:200px" ng-click="delete_task($parent.$index, $index, task.id)">
                                <i class="fa fa-trash fa-lg"></i>
                            </div>
                        </div>
                    </div>
                </div>
        
                <div style="margin-top:5px">
                    <form ng-submit="add_tasks($parent.$index, taskName)">
                        <div style="display:inline-block">
                            <input  type="checkbox" ng-checked="completed" ng-click="toggleCompleted()">
                            <input ng-style="style.modalbuttonStyle()" ng-class="completedClass(completed)" type="text" size="10" ng-model="taskName">
                            <button ng-hide="hideAddButton" type="submit">add task</button>
                        </div>
                    </form>
                </div>
                
            </div>
            <br>
            
        </div>
  
        <div>
            <button ng-style="style.buttonStyle()" ng-click="toggleAddList()">Add new List</button>
            <addtoolsmodal question="addListMenu">
                    <form ng-style="style.addModalStyle()" class="addForm">
                        <div style="margin:40px">
                            List Name:
                            <br/>
                            <input ng-style="style.modalbuttonStyle()" type="text"  size="8" ng-model="todolist.listName" />
                            <br/>
                            <br>
                            List Color: <button ng-style="{'background-color':'rbg(' +todolist.color+ ')'}" style="height:15px;width:10px; cursor: context-menu; margin-right:5px"></button>
                            <div>
                            <colorpicker selected="todolist.color"></colorpicker>
                            <br>
                            </div>
                            <button ng-style="style.buttonStyle()" ng-click="add_list()">add</button>
                            <button ng-style="style.buttonStyle()" ng-click="cancelAdd()">cancel</button>
                        </div>
                    </form>
            </addtoolsmodal>
        </div>
            
        
    </div>
    
    
    