<br>
<div ng-controller="addEventCtrl as add">
    
        <button ng-style="style.buttonStyle()" style="position:absolute; left:0px" ng-click='add.toggleCreateEvent()'>Create New Event</button>
        

        <addeventmodal showmodal='add.createEvent'>
           <form name="addForm" novalidate>
                
                <div style="position:relative">
                    Event Name:
                    <input ng-style="style.modalbuttonStyle()" style="position:absolute" type="text" name="name" ng-model="add.name" required>
                    <div style="float:left; color:red; font-size:12px; font-weight:bold; margin-right:5px" ng-show="addForm.name.$invalid">*required</div>
                </div>
                <br>
                <div style="position:relative">
                    Calendar: 
                    <select ng-style="style.modalbuttonStyle()" name="calendar" ng-model="add.calendar_id" ng-options="calendar as calendar.name for calendar in add.calendars track by calendar.id"></select>
                </div>   
                <br>
                
                <div style="position:relative">
                    All Day:<input style="position:absolute" type="checkbox" ng-checked="add.allDay" ng-click="add.toggleAllDay()">
                </div>
                <br>
                
                
               
                <div style="position:relative; font-size:90%">
                    <minicalendars style="width:170px; position:absolute; left:0px" selected="add.startDate">
                        START: <input startdate type="text" ng-style="style.modalbuttonStyle()" style="position:absolute; right:20px; top:0px" size="8" ng-model="add.startDate" ng-model-options="{ updateOn: 'blur'}">
                    </minicalendars>
                    
                    <div style="position:absolute; left:172px;  width:137px">
                       <table style="width: 137px; table-layout:fixed; border-collapse:collapse" ng-show="!add.allDay">
                           <tr style="width:137px; border:none; height:20px">
                               <td style="width:42px; border:none; padding:0px">
                                    <select ng-style="style.modalbuttonStyle()" style="position:absolute; z-index:2; top:0" onfocus='this.size=10;' onblur='this.size=1;' onchange='this.size=1; this.blur();'  ng-model="add.startHour">
                                            <option value="12">12</option>
                                            <option value="01">01</option>
                                            <option value="02">02</option>
                                            <option value="03">03</option>
                                            <option value="04">04</option>
                                            <option value="05">05</option>
                                            <option value="06">06</option>
                                            <option value="07">07</option>
                                            <option value="08">08</option>
                                            <option value="09">09</option>
                                            <option value="10">10</option>
                                            <option value="11">11</option>
                                    </select> 
                               </td>
                               <td style="width:5px; border:none; padding:0px">
                                   <div style="position:absolute; top:0">:</div>
                               </td>
                               <td style="width:45px; border:none; padding:0px">
                                   <select ng-style="style.modalbuttonStyle()" style="position:absolute; z-index:2; top:0" onfocus='this.size=10;' onblur='this.size=1;' onchange='this.size=1; this.blur();' ng-model="add.startMinutes">
                                                <option value="00">00</option>
                                                <option value="01">01</option>
                                                <option value="02">02</option>
                                                <option value="03">03</option>
                                                <option value="04">04</option>
                                                <option value="05">05</option>
                                                <option value="06">06</option>
                                                <option value="07">07</option>
                                                <option value="08">08</option>
                                                <option value="09">09</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                                <option value="13">13</option>
                                                <option value="14">14</option>
                                                <option value="15">15</option>
                                                <option value="16">16</option>
                                                <option value="17">17</option>
                                                <option value="18">18</option>
                                                <option value="19">19</option>
                                                <option value="20">20</option>
                                                <option value="21">21</option>
                                                <option value="22">22</option>
                                                <option value="23">23</option>
                                                <option value="24">24</option>
                                                <option value="25">25</option>
                                                <option value="26">26</option>
                                                <option value="27">27</option>
                                                <option value="28">28</option>
                                                <option value="29">29</option>
                                                <option value="30">30</option>
                                                <option value="31">31</option>
                                                <option value="32">32</option>
                                                <option value="33">33</option>
                                                <option value="34">34</option>
                                                <option value="35">35</option>
                                                <option value="36">36</option>
                                                <option value="37">37</option>
                                                <option value="38">38</option>
                                                <option value="39">39</option>
                                                <option value="40">40</option>
                                                <option value="41">41</option>
                                                <option value="42">42</option>
                                                <option value="43">43</option>
                                                <option value="44">44</option>
                                                <option value="45">45</option>
                                                <option value="46">46</option>
                                                <option value="47">47</option>
                                                <option value="48">48</option>
                                                <option value="49">49</option>
                                                <option value="50">50</option>
                                                <option value="51">51</option>
                                                <option value="52">52</option>
                                                <option value="53">53</option>
                                                <option value="54">54</option>
                                                <option value="55">55</option>
                                                <option value="56">56</option>
                                                <option value="57">57</option>
                                                <option value="58">58</option>
                                                <option value="59">59</option>
                                    </select>
                                   
                               </td>
                               <td style="width:45px; border:none; padding:0px">
                                        <select ng-style="style.modalbuttonStyle()" style="position:absolute; z-index:2; top:0" ng-model="add.startMeridiem">
                                            <option value="am">AM</option>
                                            <option value="pm">PM</option>
                                        </select>
                               </td>
                           </tr>
                       </table>
                   </div>
         
                </div>
                
                <br>
                <br>
                        
                <div style="position:relative; font-size:90%; margin-bottom:8px">
                    <minicalendars style="width:170px; position:absolute; left:0px" selected="add.endDate">
                        END: <input ng-style="style.modalbuttonStyle()" style="position:absolute; right:20px; top:0px" enddate type="text" size="8" ng-model="add.endDate" ng-model-options="{ updateOn: 'blur', allowInvalid:true}">
                    </minicalendars>
                    
                    <div style="position:absolute; left:172px;  width:137px">
                       <table style="width: 137px; table-layout:fixed; border-collapse:collapse" ng-show="!add.allDay">
                           <tr style="width:137px; border:none; height:20px">
                               <td style="width:42px; border:none; padding:0px">
                                    <select ng-style="style.modalbuttonStyle()" style="position:absolute; top:0; z-index:1" onfocus='this.size=10;' onblur='this.size=1;' onchange='this.size=1; this.blur();' ng-model="add.endHour">
                                            <option value="12">12</option>
                                            <option value="01">01</option>
                                            <option value="02">02</option>
                                            <option value="03">03</option>
                                            <option value="04">04</option>
                                            <option value="05">05</option>
                                            <option value="06">06</option>
                                            <option value="07">07</option>
                                            <option value="08">08</option>
                                            <option value="09">09</option>
                                            <option value="10">10</option>
                                            <option value="11">11</option>
                                    </select> 
                               </td>
                               <td style="width:5px; border:none; padding:0px">
                                   <div style="position:absolute; top:0">:</div>
                               </td>
                               <td style="width:45px; border:none; padding:0px">
                                   <select ng-style="style.modalbuttonStyle()" style="position:absolute; top:0; z-index:1" onfocus='this.size=10;' onblur='this.size=1;' onchange='this.size=1; this.blur();' ng-model="add.endMinutes">
                                                <option value="00">00</option>
                                                <option value="01">01</option>
                                                <option value="02">02</option>
                                                <option value="03">03</option>
                                                <option value="04">04</option>
                                                <option value="05">05</option>
                                                <option value="06">06</option>
                                                <option value="07">07</option>
                                                <option value="08">08</option>
                                                <option value="09">09</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                                <option value="13">13</option>
                                                <option value="14">14</option>
                                                <option value="15">15</option>
                                                <option value="16">16</option>
                                                <option value="17">17</option>
                                                <option value="18">18</option>
                                                <option value="19">19</option>
                                                <option value="20">20</option>
                                                <option value="21">21</option>
                                                <option value="22">22</option>
                                                <option value="23">23</option>
                                                <option value="24">24</option>
                                                <option value="25">25</option>
                                                <option value="26">26</option>
                                                <option value="27">27</option>
                                                <option value="28">28</option>
                                                <option value="29">29</option>
                                                <option value="30">30</option>
                                                <option value="31">31</option>
                                                <option value="32">32</option>
                                                <option value="33">33</option>
                                                <option value="34">34</option>
                                                <option value="35">35</option>
                                                <option value="36">36</option>
                                                <option value="37">37</option>
                                                <option value="38">38</option>
                                                <option value="39">39</option>
                                                <option value="40">40</option>
                                                <option value="41">41</option>
                                                <option value="42">42</option>
                                                <option value="43">43</option>
                                                <option value="44">44</option>
                                                <option value="45">45</option>
                                                <option value="46">46</option>
                                                <option value="47">47</option>
                                                <option value="48">48</option>
                                                <option value="49">49</option>
                                                <option value="50">50</option>
                                                <option value="51">51</option>
                                                <option value="52">52</option>
                                                <option value="53">53</option>
                                                <option value="54">54</option>
                                                <option value="55">55</option>
                                                <option value="56">56</option>
                                                <option value="57">57</option>
                                                <option value="58">58</option>
                                                <option value="59">59</option>
                                    </select>
                                   
                               </td>
                               <td style="width:45px; border:none; padding:0px">
                                        <select ng-style="style.modalbuttonStyle()" style="position:absolute; top:0; z-index:1" ng-model="add.endMeridiem">
                                            <option value="am">AM</option>
                                            <option value="pm">PM</option>
                                        </select>
                               </td>
                           </tr>
                       </table>
                   </div>
                </div>
                <br>
                
                <div starttimeval id="addendtimeval" ng-show=false name="addstarttimeval" ng-model="add.validateStartTime">{{add.validateStartTime}}</div>
                <div endtimeval id="addstarttimeval"  ng-show=false name="addendtimeval" ng-model="add.validateEndTime">{{add.validateEndTime}}</div>
                <div starttimeval id="addrepeatval" ng-show=false name="addstarttimeval" ng-model="add.validateStartTime">{{add.validateStartTime}}</div>
                <div endtimeval id="addstarttimeval"  ng-show=false name="addrepeatval" ng-model="add.validateRepeatDate">{{add.validateRepeatDate}}</div>
                
                <span style="color:red" ng-show="addForm.addendtimeval.$error.endtimeval">*Event ends before it starts!</span>
              
                <br>
                <div style="margin-top:10px; position:relative; font-size:90%">
                    REPEAT: <input type="checkbox" ng-checked="add.repeats" ng-click="add.toggleRepeats()"><br>
                    <div  ng-show="add.repeats">
                        <div style="float:left; color:red; font-weight:bold" ng-show="addForm.selectRepeatOcurrence.$invalid">*</div>
                        <select ng-style="style.modalbuttonStyle()" ng-required="add.repeats" ng-model="add.repeatOccurrence" ng-change="add.changeRepeatOptions(add.repeatOccurrence)" name="selectRepeatOcurrence">
                        <option value="">Please Select</option>
                        <option value="daily">Daily</option>
                        <option value="weekday">Every weekday(Mon-Fri)</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                        <option value="yearly">Yearly</option>
                        </select>
                        <br>
                        <div style="display:inline-block; margin-top:5px" ng-show="add.repeatsWeeklyMenu" name="repeatsWeeklyMenu" ng-repeat="option in add.repeatWeeklyOptions">
                            <input ng-checked="option.selected" ng-click="add.toggleRepeatWeeklyOption(option.id)" type="checkbox">{{option.name}}
                        </div>
                       
                        <div style="position:absolute; top:20px; left:200px" ng-show="add.intervalSelection">
                            <span style="positon:absolute; left:0px; top:0px">Every: </span>
                            <select ng-style="style.modalbuttonStyle()" style="position:absolute; left:45px; top:0; z-index:1" onfocus='this.size=10;' onblur='this.size=1;' onchange='this.size=1; this.blur();' ng-model="add.repeatInterval">
                                <option value="1">01</option>
                                <option value="2">02</option>
                                <option value="3">03</option>
                                <option value="4">04</option>
                                <option value="5">05</option>
                                <option value="6">06</option>
                                <option value="7">07</option>
                                <option value="8">08</option>
                                <option value="9">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                            </select>
                            <span style="position:absolute; top:0px; left:90px">{{add.intervalWord}}</span>
                        </div>
                        <br>
                        <br>
                        <div style="position:absolute">
                            <div style="positon:absolute; left:0px; top:0px">Ends on: </div>
                            <minicalendars style="width:170px; position:absolute; left:50px; top:0px" selected="add.repeatEndDate">
                                <input type="radio"  style="position:absolute; top:0px; left:5px" ng-model="add.repeatEndValue" value="date"> 
                                <div style="position:absolute; top:0px; left:25px">date</div> 
                                <input enddate type="text" ng-style="style.modalbuttonStyle()" style="position:absolute; right:20px; top:0px" size="8" ng-model="add.repeatEndDate" ng-model-options="{ updateOn: 'blur', allowInvalid:true}">
                            </minicalendars>
                            
                            <span style="color:red" ng-show="addForm.addrepeatval.$error.endtimeval">* Repetition cannot end before event starts!</span>
                            <div style="position:absolute; left:225px; top:0px">
                                    <input type="radio"  style="position:absolute; left:0px; top:0px" ng-model="add.repeatEndValue" value="never">
                                    <div style="position:absolute; top:0px; left:20px">never</div> 
                            </div>
                            
                        </div>
                        <br>
                    </div>
                    
                </div>            
               
                <br>
                    <div style=" margin-top:5px; position:relative">
                       <button ng-style="style.buttonStyle()" ng-disabled="addForm.$invalid" ng-click="add.addEvent()">add Event</button>
                    </div>
                
            </form>
        </addeventmodal>
       
</div>

<div ng-controller="mainCalViewCtrl">
    <div style="position:absolute; right:15px">
            <button ng-style="style.buttonStyle()" ng-click="today()">Today</button> 
            <button ng-style="style.buttonStyle()" ng-click="selectMonthly()">Monthly</button>
            <button ng-style="style.buttonStyle()" ng-click="selectWeekly()">Weekly</button>

    </div>
    <br>
    <br>
    
    <!--********************************************************MONTHLY VIEW*************************************************************-->
    <div ng-show="monthlyView" ng-controller="monthlyViewCtrl as monthctrl"> 
        
        <div style="left:35%; width:200px; position:absolute">
            <div style="float:left; font-size:150%; margin-right:10px; cursor:hand" ng-click="monthctrl.previous()"><i class="fa fa-chevron-circle-left"></i></div>
            <div style="float:left; font-weight:bold">{{monthctrl.calendar.selected.format('MMMM, YYYY')}}</div>
            <div style="float:left; font-size:150%; margin-left:10px; cursor:hand" ng-click="monthctrl.next()"><i class="fa fa-chevron-circle-right"></i></div>
        </div>
        <br>
        <br>
        
        <div ng-controller="editEventCtrl as edit">
        
            <table style="width:98%">
                <tr style="height:20px">
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </tr>
            </table>
            
           <div id="bigCalTable" style="display:table; width:105%" ng-repeat="week in monthctrl.calendar.currentDisplayMonth.weeks">
                <div style="display:table-cell; width:150px; height:200px; border:1px solid #ebebe0" ng-repeat="day in week.days">
                    <div style="width:100%; display:block">
                        <div ng-style="{'margin-left':'5px', 'color':style.theStyle.css.buttons_borderColor}"  class="bigCalDates">{{day.dateOfMonth}}</div>
                          
                        <div ng-style="{'position':'relative', 'margin-bottom':'20px', 'height':day.longEventsHeight * 20, 'width':'100%'}">
                           <div style="display:table-row; position:absolute; width:100.5%; height:15px; z-index:20; pointer-events:none" ng-style="{'top':event.top, 'border-bottom':'1px solid', 'border-top':'2px solid', 'border-color':'#e6e6e6', 'border-radius':getBorderRad(), 'background-color':'rgba(255, 255, 255, 0.6)', 'cursor':'hand'}"ng-repeat-start="event in day.longEvents"></div> 
                            <div  style="display:table-row; position:absolute; width:100.5%; height:15px" ng-controller="eventCtrl" ng-click="toggleEventMenu()" ng-style="{'top':event.top, 'border-bottom':'1px solid', 'border-top':'2px solid', 'border-color':'#e6e6e6', 'border-radius':getBorderRad(), 'background-color':'rgb(' +getColor()+ ')', 'cursor':'hand'}" ng-repeat-end>
                                <div ng-if="event.eventStartsOn == day.itsDate.format('YYYY-MM-DD')" ng-style="{'width':getLongWidth()}" style="position:absolute; height:15px; z-index:100; border-left:2px solid #e6e6e6; overflow:hidden">
                                    <span style="margin-left:20%; font-size:90%">{{event.name}}</span>
                                </div>
                                <div ng-if="event.eventStartsOn != day.itsDate.format('YYYY-MM-DD')">&nbsp</div>
                                <questionmodal question='eventMenu'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:10%">What would you like to do with this event?</div>
                                        <div style="margin-top:15px; margin-left:30%">
                                            <button  ng-style="style.buttonStyle()" ng-click="editEvent(event)">Edit</button>
                                            <button  ng-style="style.buttonStyle()" ng-click="deleteEvent()">Delete</button>
                                        </div>
                                            
                                    </div>
                                </questionmodal>
                                
                                <continuemodal question='kindOfEdition'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <button ng-style="style.buttonStyle()" style="margin-top:15px; margin-left:30%" ng-click="editThisEvent(event)">This Event Only</button>
                                        <br>
                                        <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:20%" ng-click="editFutureEvents(event)">All Events Going Forward</button>
                                        <br>
                                        <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:25%" ng-click="editAllEvents(event)">All Event Repetitions</button> 
                                    </div>
                                        
                                </continuemodal>
                                
                                <continuemodal question="eventsRepQuestion">
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color': 'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:20%">
                                            <button ng-style="style.buttonStyle()" style="margin-top:10px" ng-click="deleteAllOcurrences()">Delete All Event Occurrences</button>
                                            <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:5px" ng-click="deleteOnlyThisOcurrance()">Delete Only This Ocurrence</button>
                                        </div>
                                    </div>
                                        
                                </continuemodal>
                                
                                <continuemodal  question='verifyDeletion'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color': 'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:15px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:5px; margin-left:10%" ng-if="verificationAnswer == 'all'">Repeats until: {{startDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%; font-weight:bold">{{verificationQuestion}}</div>
                                        <div style="margin-top:10px; margin-left:40%">
                                            <button ng-style="style.buttonStyle()" ng-click="yesDeleteEvent()">YES</button> 
                                            <button ng-style="style.buttonStyle()" ng-click="noDeleteEvent()">NO</button>
                                        </div>
                                    </div>
                                       
                                </continuemodal>
                                
                            </div>
                        </div>
                        
                        <div style="margin-top:5px">
                            <div style="position:relative; width:100%; font-size:14px" ng-controller="eventCtrl" ng-repeat="event in day.events">
                                <div ng-if="event.allDay != true" ng-style="{'color':'rgb(' +getColor()+ ')', 'cursor':'hand'}"  ng-click="toggleEventMenu()">
                                        <span style="font-size:12px; font-family:'Arial Narrow', Arial, sans-serif)">{{event.startTimeDisplay}}-{{event.endTimeDisplay}}</span>
                                        <span> {{event.name}}</span>
                                </div>
                                
                                <div ng-if="event.allDay == true" ng-style="{'background-color':'rgba(' +getColor()+ ', 0.6)', 'border-radius':'30px', 'cursor':'hand'}" ng-click="toggleEventMenu()">
                                        <span style="margin-left:10%">{{event.name}}</span>
                                </div>
                
                                <questionmodal question='eventMenu'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:10%">What would you like to do with this event?</div>
                                        <div style="margin-top:15px; margin-left:30%">
                                            <button  ng-style="style.buttonStyle()" ng-click="editEvent(event)">Edit</button>
                                            <button  ng-style="style.buttonStyle()" ng-click="deleteEvent()">Delete</button>
                                        </div>
                                            
                                    </div>
                                </questionmodal>
                                
                                <continuemodal question='kindOfEdition'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <button ng-style="style.buttonStyle()" style="margin-top:15px; margin-left:30%" ng-click="editThisEvent(event)">This Event Only</button>
                                        <br>
                                        <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:20%" ng-click="editFutureEvents(event)">All Events Going Forward</button>
                                        <br>
                                        <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:25%" ng-click="editAllEvents(event)">All Event Repetitions</button> 
                                    </div>
                                        
                                </continuemodal>
                                
                                <continuemodal question="eventsRepQuestion">
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:20%">
                                            <button ng-style="style.buttonStyle()" style="margin-top:10px" ng-click="deleteAllOcurrences()">Delete All Event Occurrences</button>
                                            <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:5px" ng-click="deleteOnlyThisOcurrance()">Delete Only This Ocurrence</button>
                                        </div>
                                    </div>
                                        
                                </continuemodal>
                                
                                <continuemodal  question='verifyDeletion'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:15px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:5px; margin-left:10%" ng-if="verificationAnswer == 'all'">Repeats until: {{startDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%; font-weight:bold">{{verificationQuestion}}</div>
                                        <div style="margin-top:10px; margin-left:40%">
                                            <button ng-style="style.buttonStyle()" ng-click="yesDeleteEvent()">YES</button> 
                                            <button ng-style="style.buttonStyle()" ng-click="noDeleteEvent()">NO</button>
                                        </div>
                                    </div>
                                       
                                </continuemodal>
                                
                            </div>
                        </div>
                        <br>
                    </div>
                </div>
            </div>

            <addeventmodal showmodal="edit.editModal">
                <div ng-include="urlTemplate"></div>
            </addeventmodal>
            
        </div>
     
        
    </div>
    
    <!--*********************************************************************WEEKLY VIEW***********************************************************-->
    <div style="display:inline-block; position:relative; width:103%" ng-show="weeklyView" ng-controller="weekViewCtrl">
        
        <div style="left:35%; width:250px; position:absolute">
            <div style="float:left; font-size:150%; margin-right:10px; cursor:hand" ng-click="previous()"><i class="fa fa-chevron-circle-left"></i></div>
            <div style="float:left">{{calendar.selected.format('MMMM-YYYY')}}</div>
            <div style="float:left; font-size:150%; margin-left:10px; cursor:hand" ng-click="next()"><i class="fa fa-chevron-circle-right"></i></div>
        </div>
        <br>
        <br>

        <table style="width:100%; margin-left:10px; ">
            <tr style="height:15px">
                <td>
                   
                    <div style="font-weight:bold; margin-left:5px">Time</div>
                       
               </td>
                <td ng-repeat="day in calendar.currentDisplayWeek.days">
                  
                           <div style="margin-left:2px; font-weight:bold">{{day.itsDate.format('ddd')}} {{day.itsDate.format('MM-DD')}}</div>
                </td>
            </tr>
        </table>
        
        <div style="float:left; width:100%; margin-left:10px">
            <div style="width:100%; float:left; height:100px; display:table; border-collapse: collapse" ng-controller="editEventCtrl as edit">
                <div style="display:table-cell; position:relative; width:5%; border:1px solid #e6e6e6">
                    <div style="position:absolute; font-weight:bold; left:5px; top:30%">All Day</div>
                </div>
                <div style="display:table-cell; width:13%; border:1px solid #e6e6e6" ng-repeat="day in calendar.currentDisplayWeek.days">
                    <div ng-style="{'position':'relative', 'margin-bottom':'20px', 'height':day.longEventsHeight * 20, 'width':'100%'}">&nbsp
                       <div style="display:table-row; position:absolute; width:100.5%; height:15px; z-index:20; pointer-events:none" ng-style="{'top':event.top, 'border-bottom':'1px solid', 'border-top':'2px solid', 'border-color':'#e6e6e6', 'border-radius':getBorderRad(), 'background-color':'rgba(255, 255, 255, 0.6)', 'cursor':'hand'}"ng-repeat-start="event in day.longEvents"></div> 
                        <div style="display:table-row; position:absolute; width:100.5%; height:15px" ng-controller="eventCtrl" ng-click="toggleEventMenu()" ng-style="{'top':event.top, 'border-bottom':'1px solid', 'border-top':'2px solid', 'border-color':'#e6e6e6', 'border-radius':getBorderRad(), 'background-color':'rgb(' +getColor()+ ')', 'cursor':'hand'}" ng-repeat-end>
                            <div ng-if="event.eventStartsOn == day.itsDate.format('YYYY-MM-DD')" ng-style="{'width':getLongWidth()}" style="position:absolute; height:15px; z-index:100; border-left:2px solid #e6e6e6; overflow:hidden" >
                                <span style="margin-left:20%; font-size:90%">{{event.name}}</span>
                            </div>
                            <div style="font-size:90%" ng-if="event.eventStartsOn != day.itsDate.format('YYYY-MM-DD')">&nbsp</div>
                            
                                <questionmodal question='eventMenu'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:10%">What would you like to do with this event?</div>
                                        <div style="margin-top:15px; margin-left:30%">
                                            <button  ng-style="style.buttonStyle()" ng-click="editEvent(event)">Edit</button>
                                            <button  ng-style="style.buttonStyle()" ng-click="deleteEvent()">Delete</button>
                                        </div>
                                            
                                    </div>
                                </questionmodal>
                                
                                <continuemodal question='kindOfEdition'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <button ng-style="style.buttonStyle()" style="margin-top:15px; margin-left:30%" ng-click="editThisEvent(event)">This Event Only</button>
                                        <br>
                                        <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:20%" ng-click="editFutureEvents(event)">All Events Going Forward</button>
                                        <br>
                                        <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:25%" ng-click="editAllEvents(event)">All Event Repetitions</button> 
                                    </div>
                                        
                                </continuemodal>
                                
                                <continuemodal question="eventsRepQuestion">
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:20%">
                                            <button ng-style="style.buttonStyle()" style="margin-top:10px" ng-click="deleteAllOcurrences()">Delete All Event Occurrences</button>
                                            <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:5px" ng-click="deleteOnlyThisOcurrance()">Delete Only This Ocurrence</button>
                                        </div>
                                    </div>
                                        
                                </continuemodal>
                                
                                <continuemodal  question='verifyDeletion'>
                                    <div ng-style="style.menuModalStyle()" class="questionModal">
                                        <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                        <div style="margin-top:15px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                        <div style="margin-top:15px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                        <div style="margin-top:5px; margin-left:10%" ng-if="verificationAnswer == 'all'">Repeats until: {{startDateDisplay}}</div>
                                        <div style="margin-top:10px; margin-left:10%; font-weight:bold">{{verificationQuestion}}</div>
                                        <div style="margin-top:10px; margin-left:40%">
                                            <button ng-style="style.buttonStyle()" ng-click="yesDeleteEvent()">YES</button> 
                                            <button ng-style="style.buttonStyle()" ng-click="noDeleteEvent()">NO</button>
                                        </div>
                                    </div>
                                </continuemodal>
                        
                        </div>
                    </div>
                </div>
                
                <addeventmodal showmodal="edit.editModal">
                    <div ng-include="urlTemplate"></div>
                </addeventmodal>
            </div>
        </div>  
        
        <br>
        <div style="float:left; position:relative; height:5px; width:100%">
            <div style="position:absolute; width:100%; height:100%">&nbsp</div>
        </div>
        <br>
        
        <div id="scrollDiv" style="float:left; width:101%; height:600px; margin-left:10px; overflow-y:scroll; overflow-x:hidden; border:1.5px solid #e6e6e6">
                
            <div style="display:table; width:100%; height:100%; border-collapse: collapse" ng-controller="editEventCtrl as edit">
                
                    <div style="display:table-cell; position:relative; width:5%; border:1px solid #e6e6e6">
                        <div id="anchor{{hour.id}}" ng-style="{'top':($index * 60)}" style="display:table-row; position:absolute; width:100%; height:30px; border:none; border-top: 1px solid #e6e6e6" ng-repeat-start="hour in hours"><span style="margin-left:5px; font-weight:bold">{{hour.name}}</span></div>
                        <div ng-style="{'top':($index * 60) + 30}" style="display:table-row; position:absolute; width:100%; height:30px; border:none; border-top: 1px solid #e6e6e6" ng-repeat-end></div>
                    </div>
                    
                    <div style="display:table-cell; width:13%; position:relative; border:1px solid #e6e6e6" ng-repeat="day in calendar.currentDisplayWeek.days">
                        <div  ng-style="{'top':($index * 30)}" style="display:table-row; position:absolute; width:100%; height:30px; border:none; border-top: 1px solid #e6e6e6" ng-repeat="hour in day.hours">&nbsp</div>
                        <div style="height:30px; width:100%; border:none; position:relative" ng-controller="weekEventsCtrl as weekEvents" ng-repeat="hour in day.hours">
                            
                            <div ng-style="{'background-color':'transparent', 'width':weekEvents.getWidth($parent.$index, event), 'left':weekEvents.getLeft(event.index, event), 'height':event.height, 'top':event.top, 'position':'absolute'}" ng-repeat="event in hour.events">
                                
                                 <div ng-style="{'background-color':'rgba(' +weekEvents.getColor(event.calendar_id)+ ', 0.6)', 'width':'100%',  'height':event.totalHeight, 'top':0, 'border':'1px solid',  'border-color': 'rgb(' +weekEvents.getColor(event.calendar_id)+ ')', 'position':'absolute'}" ng-if="event.first == true"  ng-controller="eventCtrl">
                                         
                                         <div style="background-color:transparent; height:100%; width:100%; position:absolute; z-index:3; overflow:hidden; cursor:hand" ng-click="toggleEventMenu()">
                                             <div style="width:85%; margin-left:5px; height:90%; font-size:85%; margin-top:15%; font-weight:bold">{{event.startTimeDisplay}}-{{event.endTimeDisplay}} {{event.name}}</div>
                                         </div>
                                         
                                        <questionmodal question='eventMenu'>
                                            <div ng-style="style.menuModalStyle()" class="questionModal">
                                                <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                                <div style="margin-top:15px; margin-left:10%">What would you like to do with this event?</div>
                                                <div style="margin-top:15px; margin-left:30%">
                                                    <button  ng-style="style.buttonStyle()" ng-click="editEvent(event)">Edit</button>
                                                    <button  ng-style="style.buttonStyle()" ng-click="deleteEvent()">Delete</button>
                                                </div>
                                                    
                                            </div>
                                        </questionmodal>
                                        
                                        <continuemodal question='kindOfEdition'>
                                            <div ng-style="style.menuModalStyle()" class="questionModal">
                                                <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                                <button ng-style="style.buttonStyle()" style="margin-top:15px; margin-left:30%" ng-click="editThisEvent(event)">This Event Only</button>
                                                <br>
                                                <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:20%" ng-click="editFutureEvents(event)">All Events Going Forward</button>
                                                <br>
                                                <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:25%" ng-click="editAllEvents(event)">All Event Repetitions</button> 
                                            </div>
                                                
                                        </continuemodal>
                                        
                                        <continuemodal question="eventsRepQuestion">
                                            <div ng-style="style.menuModalStyle()" class="questionModal">
                                                <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                <div style="margin-top:10px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                                <div style="margin-top:15px; margin-left:20%">
                                                    <button ng-style="style.buttonStyle()" style="margin-top:10px" ng-click="deleteAllOcurrences()">Delete All Event Occurrences</button>
                                                    <button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:5px" ng-click="deleteOnlyThisOcurrance()">Delete Only This Ocurrence</button>
                                                </div>
                                            </div>
                                                
                                        </continuemodal>
                                        
                                        <continuemodal  question='verifyDeletion'>
                                            <div ng-style="style.menuModalStyle()" class="questionModal">
                                                <div style="margin-top:15px; margin-left:35%; font-size:130%; font-weight:bold" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                <div style="margin-top:15px; margin-left:10%" ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                <div style="margin-top:15px; margin-left:10%" ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                                <div style="margin-top:5px; margin-left:10%" ng-if="verificationAnswer == 'all'">Repeats until: {{startDateDisplay}}</div>
                                                <div style="margin-top:10px; margin-left:10%; font-weight:bold">{{verificationQuestion}}</div>
                                                <div style="margin-top:10px; margin-left:40%">
                                                    <button ng-style="style.buttonStyle()" ng-click="yesDeleteEvent()">YES</button> 
                                                    <button ng-style="style.buttonStyle()" ng-click="noDeleteEvent()">NO</button>
                                                </div>
                                            </div>
                                               
                                        </continuemodal>
                                    </div> 
                            </div>
                        </div>
                    </div>

                <addeventmodal showmodal="edit.editModal">
                    <div ng-include="urlTemplate"></div>
                </addeventmodal>
            </div>
        </div>
    </div>

