<div ng-controller="mainCalViewCtrl">
 
    <div style="float:left" ng-controller="addEventCtrl as add">
    
        <button ng-style="style.buttonStyle()" style="margin-left:10px" ng-click='add.toggleCreateEvent( "today", "na")'>New Event</button>
        
        <addeventmodal showmodal='add.createEvent'>
           <div ng-include="add.template"></div>
        </addeventmodal>
       
    


<!--*****************************************************************CALENDAR VIEW***************************************************************************-->


    <div style="float:right; margin-right:25px">
            
            <button class="computerScreen" ng-style="style.buttonStyle()" style="float:right; margin-left:5px" ui-sref=".main">Monthly</button>
            <button class="computerScreen" ng-style="style.buttonStyle()" style="float:right; margin-left:5px" ui-sref=".weeklyView">Weekly</button>
            <button ng-style="style.buttonStyle()" style="float:left" ng-click="today()">Today</button>
            
    </div>
    
    <div class="computerScreen" ui-view></div>
    
   
   <!--***********************************************************For Small Screens********************************************************************************************** -->
    <br>
    <br>
    <div class="smallScreen" style="position:relative"  ng-controller="weekViewCtrl">
        
         <div class="calHeader">
            <div class="calHeaderArrows" ng-click="previous()"><i class="fa fa-chevron-circle-left"></i></div>
            <div class="calHeaderDate">{{calendar.selected.format('MMMM-YYYY')}}</div>
            <div class="calHeaderArrows" ng-click="next()"><i class="fa fa-chevron-circle-right"></i></div>
        </div>
    
    <div ng-controller="editEventCtrl as edit">
       <div style="display:block; width:100%">
        <div id="smallScreenCalendar" ng-style="getStyle(day.itsDate)" ng-repeat="day in calendar.currentDisplayWeek.days" ng-click='add.toggleCreateEvent(day.itsDate, "na")'>
            <div style=" width:100%;  display:block">
                <div class="bigCalDates" ng-style="{'background-color':'rgb(' + style.theStyle.css.navBar_backgroundColor + ')', 'text-align':'center', 'color':'white'}">
                    <div style="display:inline-block">{{day.itsDate.format('dddd MMMM D')}}</div>
                    <div style="display:inline-block; position:relative; margin-left:5px; width:25px" ng-if="day.itsDate.format('MM-DD-YYYY') == todays"><img  style="width:100%; transform: rotate(45deg);" src="/pictures/pintag.png"> </div> 
                </div>
                
                 <div style=" width:100%; display:inline-block">
                        
                            <div ng-style="{'position':'relative', 'margin-bottom':'20px', 'height':day.longEventsHeight * 20, 'width':'100%'}">
                               <div style="display:table-row; position:absolute; width:100%;  height:15px; z-index:20; pointer-events:none" ng-style="{'top':event.top, 'border-radius':getBorderRad(), 'background-color':'rgba(255, 255, 255, 0.3)', 'cursor':'hand'}" ng-repeat-start="event in day.longEvents"></div> 
                                <div  style="display:table-row; position:absolute; z-index:10; width:100%; height:15px" ng-controller="eventCtrl" ng-click="toggleEventMenu(); $event.stopPropagation()" ng-style="{'top':event.top, 'border-bottom':'1px solid', 'border-top':'1px solid', 'border-color':'#cccccc', 'border-radius':getBorderRad(), 'background-color':getDisplayColor(day.itsDate), 'cursor':'hand'}" ng-repeat-end>
                                    <div style="position:absolute; height:15px; width:100%; z-index:100; ; text-align:center; overflow:hidden; text-overflow:ellipsis; white-space:nowrap">
                                        <span class="eName">{{event.name}}</span>
                                    </div>
                                    
                                    <questionmodal question='eventMenu'>
                                            <div class="questionModal">
                                                <div class="upperqDiv">
                                                    <div class="upperqDiv-content">
                                                        <div style="font-weight:bold; font-size:120%" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                        <div ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                        <div ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div> 
                                                    </div>
                                                </div>
                                                <div class="lowerqDiv">   
                                                    <div class="lowerqDiv-content">
                                                        <div>What would you like to do with this event?</div>
                                                        <div style="width:50%; margin:auto; margin-top:25px">
                                                            <div class="split">
                                                                <button  ng-style="style.buttonStyle()" class="all" ng-click="editEvent(event)">Edit</button>
                                                            </div>
                                                            <div class="split">
                                                                <button  ng-style="style.buttonStyle()" class="all" ng-click="deleteEvent()">Delete</button>
                                                            </div>
                                                        </div> 
                                                    </div>
                                                </div>  
                                            </div>
                                        </questionmodal>
                                        
                                        <continuemodal question='kindOfEdition'>
                                            <div class="questionModal">
                                                <div class="upperqDiv">
                                                    <div class="upperqDiv-content">
                                                        <div style="font-weight:bold; font-size:120%" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                        <div ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                        <div ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div> 
                                                    </div>
                                                </div>
                                                   
                                                <div class="lowerqDiv">
                                                    <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" ng-click="editThisEvent(event)">This Event Only</button></div>
                                                    <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" ng-click="editFutureEvents(event)">All Events Going Forward</button></div>
                                                    <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" ng-click="editAllEvents(event)">All Event Repetitions</button></div>
                                                </div>
                                            </div>
                                        </continuemodal>
                                        
                                        <continuemodal question="eventsRepQuestion">
                                            <div class="questionModal">
                                                <div class="upperqDiv">
                                                    <div class="upperqDiv-content">
                                                        <div style="font-weight:bold; font-size:120%" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                        <div ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                        <div ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div> 
                                                    </div>
                                                </div>
                                                <div class="lowerqDiv">
                                                    <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" style="margin-top:10px" ng-click="deleteAllOcurrences()">Delete All Event Occurrences</button></div>
                                                    <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:5px" ng-click="deleteOnlyThisOcurrance()">Delete Only This Ocurrence</button></div>
                                                </div>
                                            </div>
                                        </continuemodal>
                                        
                                        <continuemodal  question='verifyDeletion'>
                                            <div class="questionModal">
                                                <div class="upperqDiv">
                                                    <div class="upperqDiv-content">
                                                        <div style="font-size:120%; font-weight:bold" ng-style="{'color': 'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                        <div ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                        <div ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                                        <div ng-if="verificationAnswer == 'all'">Repeats until: {{startDateDisplay}}</div>
                                                    </div>
                                                </div>
                                                <div class="lowerqDiv">
                                                    <div class="lowerqDiv-content">{{verificationQuestion}}</div>
                                                    <div class="lowerqDiv-content">
                                                        <div style=" width:50%; margin:auto">
                                                            <div class="split">
                                                                <button ng-style="style.buttonStyle()" class="all" ng-click="yesDeleteEvent()">YES</button> 
                                                            </div>
                                                            <div class="split">
                                                                <button ng-style="style.buttonStyle()" class="all" ng-click="noDeleteEvent()">NO</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </continuemodal>
                                    
                                </div>
                            </div>
                            
                            <div style="margin-top:5px">
                                <div style="position:relative; width:100%" ng-controller="eventCtrl" ng-repeat="event in day.events">
                                    <div ng-if="event.allDay != true" ng-style="{'color':getDisplayColor(day.itsDate), 'cursor':'hand'}"  ng-click="toggleEventMenu(); $event.stopPropagation()">
                                            <span class="eTime">{{event.startTimeDisplay}}-{{event.endTimeDisplay}}</span>
                                            <span class="eName"> {{event.name}}</span>
                                    </div>
                                    
                                    <div ng-if="event.allDay == true" ng-style="{'background-color':getDisplayColor(day.itsDate), 'border-radius':'30px', 'cursor':'hand'}" ng-click="toggleEventMenu(); $event.stopPropagation()">
                                            <span class="eName">{{event.name}}</span>
                                    </div>
                    
                                    <questionmodal question='eventMenu'>
                                        <div class="questionModal">
                                            <div class="upperqDiv">
                                                <div class="upperqDiv-content">
                                                    <div style="font-weight:bold; font-size:120%" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                    <div ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                    <div ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div> 
                                                </div>
                                            </div>
                                            <div class="lowerqDiv">   
                                                <div class="lowerqDiv-content">
                                                    <div>What would you like to do with this event?</div>
                                                    <div style="width:50%; margin:auto; margin-top:25px">
                                                        <div class="split">
                                                            <button  ng-style="style.buttonStyle()" class="all" ng-click="editEvent(event)">Edit</button>
                                                        </div>
                                                        <div class="split">
                                                            <button  ng-style="style.buttonStyle()" class="all" ng-click="deleteEvent()">Delete</button>
                                                        </div>
                                                    </div> 
                                                </div>
                                            </div>  
                                        </div>
                                    </questionmodal>
                                    
                                    <continuemodal question='kindOfEdition'>
                                        <div class="questionModal">
                                            <div class="upperqDiv">
                                                <div class="upperqDiv-content">
                                                    <div style="font-weight:bold; font-size:120%" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                    <div ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                    <div ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div> 
                                                </div>
                                            </div>
                                               
                                            <div class="lowerqDiv">
                                                <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" ng-click="editThisEvent(event)">This Event Only</button></div>
                                                <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" ng-click="editFutureEvents(event)">All Events Going Forward</button></div>
                                                <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" ng-click="editAllEvents(event)">All Event Repetitions</button></div>
                                            </div>
                                        </div>
                                    </continuemodal>
                                    
                                    <continuemodal question="eventsRepQuestion">
                                        <div class="questionModal">
                                            <div class="upperqDiv">
                                                <div class="upperqDiv-content">
                                                    <div style="font-weight:bold; font-size:120%" ng-style="{'color':'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                    <div ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                    <div ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div> 
                                                </div>
                                            </div>
                                            <div class="lowerqDiv">
                                                <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" style="margin-top:10px" ng-click="deleteAllOcurrences()">Delete All Event Occurrences</button></div>
                                                <div class="lowerqDiv-content"><button ng-style="style.buttonStyle()" style="margin-top:10px; margin-left:5px" ng-click="deleteOnlyThisOcurrance()">Delete Only This Ocurrence</button></div>
                                            </div>
                                        </div>
                                    </continuemodal>
                                    
                                    <continuemodal  question='verifyDeletion'>
                                        <div class="questionModal">
                                            <div class="upperqDiv">
                                                <div class="upperqDiv-content">
                                                    <div style="font-size:120%; font-weight:bold" ng-style="{'color': 'rgb(' +getColor()+ ')'}">{{event.name}}</div>
                                                    <div ng-if="event.allDay == true">{{startDateDisplay}} - {{endDateDisplay}}</div>
                                                    <div ng-if="event.allDay == false">{{startDateDisplay}} at {{event.startTimeDisplay}} - {{endDateDisplay}} at {{event.endTimeDisplay}}</div>
                                                    <div ng-if="verificationAnswer == 'all'">Repeats until: {{startDateDisplay}}</div>
                                                </div>
                                            </div>
                                            <div class="lowerqDiv">
                                                <div class="lowerqDiv-content">{{verificationQuestion}}</div>
                                                <div class="lowerqDiv-content">
                                                    <div style=" width:50%; margin:auto">
                                                        <div class="split">
                                                            <button ng-style="style.buttonStyle()" class="all" ng-click="yesDeleteEvent()">YES</button> 
                                                        </div>
                                                        <div class="split">
                                                            <button ng-style="style.buttonStyle()" class="all" ng-click="noDeleteEvent()">NO</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </continuemodal>
                                </div>
                            </div>
                            <br>
                    </div>  
              </div>
              
                
          </div>
        </div>
        
        <addeventmodal showmodal="edit.editModal">
            <div ng-include="urlTemplate"></div>
        </addeventmodal>
      </div>
    </div>
    
    
    </div>
</div>